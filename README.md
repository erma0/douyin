# æŠ–éŸ³é‡‡é›†

> [å¼€æºä¸æ˜“ï¼Œè‹¥èƒ½å¸®åŠ©åˆ°æ‚¨ï¼Œå¯ä»¥è¯·ä½œè€…å–æ¯å’–å•¡](#è¯·ä½œè€…å–æ¯å’–å•¡)

`playwright`çˆ¬è™«ï¼ˆåŸºäºEDGE/Chromeæµè§ˆå™¨ï¼‰ + `Aria2`ä¸‹è½½

æ ¹æ®æŠ–éŸ³å„ç§é“¾æ¥é‡‡é›†ä¿¡æ¯å¹¶ä¸‹è½½ã€‚

---

æ”¯æŒé‡‡é›†è´¦å·ä¸»é¡µä½œå“ã€å–œæ¬¢ä½œå“ã€éŸ³ä¹åŸå£°ä½œå“ã€æœç´¢ä½œå“ã€å…³æ³¨åˆ—è¡¨ã€ç²‰ä¸åˆ—è¡¨ã€åˆé›†ä½œå“

é‡‡é›†è´¦å·çš„å–œæ¬¢åˆ—è¡¨éœ€è´¦å·æ‰“å¼€æƒé™æˆ–ç™»å½•æœ¬äººè´¦å·ã€é‡‡é›†è´¦å·ä¸»é¡µä½œå“éœ€ç™»å½•ä»»ä¸€ä¸ªè´¦å·

ä¸ºé˜²æ­¢æ„å¤–é”™è¯¯ï¼Œé»˜è®¤é‡‡é›†ä»»ä½•ç±»å‹é“¾æ¥éƒ½é¢„å…ˆç™»å½•ä¸€ä¸ªè´¦å·

æ”¯æŒè¾“å…¥æ–‡ä»¶è·¯å¾„æ‰¹é‡æ“ä½œï¼ˆåŒä¸€ç±»å‹ï¼Œä¸€è¡Œä¸€ä¸ªç›®æ ‡åœ°å€ï¼‰

è´¦å·ä¸»é¡µä½œå“æ”¯æŒå¢é‡é‡‡é›†

## å£°æ˜

> æ­¤ç¨‹åºä¸ºå­¦ä¹ playwrightçˆ¬è™«åŠPythonä¸­è°ƒç”¨Aria2çš„æ¡ˆä¾‹ï¼Œä»…ä¾›å‚è€ƒï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚

## é¡¹ç›®åœ°å€

[https://github.com/erma0/douyin](https://github.com/erma0/douyin)

## â€å¾…åŠ

> ğŸ’¡æ¬¢è¿PRæˆ–å»ºè®®

- [ ] API - FastAPI
- [ ] WEB UI - AMIS
- [ ] GUI - pywebview

## ä½¿ç”¨

> æµ‹è¯•ç¯å¢ƒï¼š`Win10/11 x64` + `Python3.8/11`ã€‚**åŠŸèƒ½æœªå…¨éƒ¨æµ‹è¯•ï¼Œæœ‰é—®é¢˜è¯·æäº¤issueï¼Œä¹Ÿå¯åŠ Qç¾¤`738029092`åé¦ˆ**

1. Windowsåªéœ€ä¸‹è½½ [releases](https://github.com/erma0/douyin/releases) æˆ– `dist`ç›®å½•ä¸­çš„ä¸¤ä¸ªæ–‡ä»¶

```
douyin.exe
aria2c.exe
```

Linuxæˆ–macOSè¯·ä»[å®˜æ–¹åœ°å€ä¸‹è½½å¯¹åº”çš„Aria2](https://github.com/aria2/aria2/releases)ï¼Œç„¶åè¿è¡Œæºç æˆ–è‡ªè¡Œç¼–è¯‘

2. åœ¨ç¨‹åºæ‰€åœ¨ç›®å½•æ‰“å¼€å‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤ï¼Œæˆ–è€…Windowsç³»ç»Ÿå¯ä»¥ç›´æ¥åŒå‡»æ‰“å¼€douyin.exeåæ ¹æ®æç¤ºè¾“å…¥ç›®æ ‡åœ°å€

- ä½¿ç”¨å¸®åŠ©

```
PS > ./douyin --help
Usage: douyin [OPTIONS]

  å‘½ä»¤è¡Œ

Options:
  -u, --urls TEXT                 å¿…å¡«ã€‚è´¦å·/è¯é¢˜/éŸ³ä¹çš„URLæˆ–æ–‡ä»¶è·¯å¾„ï¼ˆæ–‡ä»¶æ ¼å¼ä¸ºä¸€è¡Œä¸€ä¸ªURLï¼‰ï¼Œæ”¯æŒå¤šæ¬¡è¾“å…¥
  -n, --num INTEGER               é€‰å¡«ã€‚æœ€å¤§é‡‡é›†æ•°é‡ï¼Œé»˜è®¤ä¸é™åˆ¶
  -g, --grab                      é€‰å¡«ã€‚åªé‡‡é›†ä¿¡æ¯ï¼Œä¸ä¸‹è½½ä½œå“
  -d, --download                  é€‰å¡«ã€‚ç›´æ¥ä¸‹è½½é‡‡é›†å®Œæˆçš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºé‡‡é›†æ—¶ä¸‹è½½å¤±è´¥åé‡è¯•
  -l, --login                     é€‰å¡«ã€‚æŒ‡å®šæ˜¯å¦éœ€è¦ç™»å½•ï¼Œé»˜è®¤è¦ç™»å½•ï¼Œç”¨äºé‡‡é›†ä¸»é¡µä½œå“ã€å…³æ³¨ç²‰ä¸åˆ—è¡¨ä»¥åŠæœ¬äººç§å¯†è´¦å·çš„ä¿¡æ¯
                                  ï¼Œä¹Ÿå¯é¿å…ä¸€äº›è«åå…¶å¦™çš„é£æ§
  -t, --type [post|like|music|search|follow|fans|collection|video]
                                  é€‰å¡«ã€‚é‡‡é›†ç±»å‹ï¼Œæ”¯æŒ[ä¸»é¡µä½œå“/å–œæ¬¢/éŸ³ä¹/æœç´¢/å…³æ³¨/ç²‰ä¸/åˆé›†/å•ä½œå“]ï¼Œé»˜è®¤é‡‡é›†p
                                  ostä¸»é¡µä½œå“ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«æœç´¢/éŸ³ä¹/åˆé›†/å•ä½œå“ã€‚é‡‡é›†è´¦å·ä¸»é¡µä½œå“æˆ–ç§å¯†è´¦å·å–œæ¬¢ä½œå“
                                  å¿…é¡»ç™»å½•ã€‚
  -b, --browser [chrome|msedge|chrome-beta|msedge-beta|msedge-dev]
                                  é€‰å¡«ã€‚æµè§ˆå™¨ç±»å‹ï¼Œé»˜è®¤ä½¿ç”¨ç¨³å®šç‰ˆEDGEï¼Œå¯é€‰[chrome/msedge]ï¼Œå¦‚éœ€ä½¿ç”¨F
                                  irefoxæˆ–WebKitè¯·è‡ªè¡Œä¿®æ”¹runå‡½æ•°ã€‚
  --help                          Show this message and exit.
```

- ä½¿ç”¨ä¾‹å­ï¼ˆåœ¨ç¨‹åºæ‰€åœ¨ç›®å½•æ‰“å¼€å‘½ä»¤è¡Œï¼‰

```
# é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆä¸»é¡µï¼‰çš„å…¨éƒ¨ä½œå“ï¼ˆç§å¯†è´¦å·éœ€ç™»å½•æœ¬è´¦å·ï¼‰
./douyin -u https://*/ 
./douyin -t post -u https://*/ 

# é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆå–œæ¬¢ï¼‰çš„å…¨éƒ¨ä½œå“ï¼ˆç§å¯†è´¦å·éœ€ç™»å½•æœ¬è´¦å·ï¼‰
./douyin -t like -u https://*/ 

# é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆéŸ³ä¹ï¼‰çš„å…¨éƒ¨ä½œå“
./douyin -u https://*/ 
./douyin -t music -u https://*/ 

# é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆæœç´¢ï¼‰çš„å…¨éƒ¨ä½œå“
./douyin -u https://*/ 
./douyin -t search -u https://*/ 

# é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆåˆé›†ï¼‰çš„å…¨éƒ¨ä½œå“
./douyin -u https://*/ 
./douyin -t collect -u https://*/ 

# é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆå…³æ³¨ï¼‰çš„å…¨éƒ¨ä¿¡æ¯
./douyin -t follow -u https://*/ 

# é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆç²‰ä¸ï¼‰çš„å…¨éƒ¨ä¿¡æ¯
./douyin -t fans -u https://*/ 

# åªé‡‡é›†ç›®æ ‡ä¿¡æ¯ï¼Œä¸ä¸‹è½½
./douyin -g -u https://*/ 

# ç›´æ¥ä¸‹è½½é‡‡é›†è¿‡çš„ç›®æ ‡åœ°å€ï¼ˆç”¨äºé‡‡é›†æ—¶ä¸‹è½½å‡ºç°æŠ¥é”™çš„æƒ…å†µï¼‰
./douyin -d -u https://*/ 

# é™åˆ¶æ•°é‡é‡‡é›†ï¼Œåªé‡‡é›†ç›®æ ‡åœ°å€çš„5æ¡ç»“æœ
./douyin -n 5 -u https://*/ 

# é‡‡é›†å¤šä¸ªç›®æ ‡åœ°å€
./douyin -u https://*1/ -u https://*2/ 

# é‡‡é›†æ–‡ä»¶[user.txt]ä¸­çš„å¤šä¸ªç›®æ ‡åœ°å€
./douyin -u ./user.txt

# æŒ‡å®šä¸ç™»å½•é‡‡é›†ç›®æ ‡åœ°å€
./douyin -l -u https://*/ 

# æŒ‡å®šä½¿ç”¨chromeé‡‡é›†
./douyin -b chrome -u https://*/ 

# é‡‡é›†å•ä¸ªä½œå“
./douyin -u id
./douyin -u https://*/ 
```

## ç¼–è¯‘

> â—**ä¸èƒ½upxå‹ç¼©ï¼Œå¦åˆ™playwrightæ— æ³•å¯åŠ¨**

1. å®‰è£…ä¾èµ–

```
pip install -r .\requirements.txt
```

2. å®‰è£…pyinstaller

```
pip install pyinstaller
```

3. è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆpowershellï¼‰

```
$env:PLAYWRIGHT_BROWSERS_PATH="0"
```

4. å®‰è£…Edgeæˆ–è€…Chrome

```
playwright install msedge
playwright install chromium
```

5. æ‰“åŒ…EXEï¼Œå›¾æ ‡å¯è‡ªè¡Œæ›´æ¢

```
pyinstaller -F ./douyin.py -i ./ico.ico 
```

## è¯·ä½œè€…å–æ¯å’–å•¡

---

![æ”¯ä»˜å®å¾®ä¿¡æ”¶æ¬¾][1]

  [1]: https://erma0.gitee.io/images/qrcode/shouqianma.png
