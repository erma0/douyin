![douyin](https://socialify.git.ci/erma0/douyin/image?description=1&font=Source%20Code%20Pro&forks=1&issues=1&language=1&name=1&owner=1&pattern=Circuit%20Board&stargazers=1&theme=Auto)

# âœ¨æŠ–éŸ³çˆ¬è™«

> â¤ï¸[å¼€æºä¸æ˜“ï¼Œæ¬¢è¿starâ­ï¼Œè‹¥èƒ½å¸®åŠ©åˆ°æ‚¨ï¼Œå¯ä»¥è¯·ä½œè€…å–æ¯å’–å•¡â˜•](#â˜•è¯·ä½œè€…å–æ¯å’–å•¡)

## ğŸ“¢å£°æ˜

> æœ¬ä»“åº“ä¸ºå­¦ä¹ `playwright`çˆ¬è™«ã€å‘½ä»¤è¡Œè°ƒç”¨`Aria2`åŠ`FastAPI/AMIS/Eel`å®ç°`WEBUI`çš„æ¡ˆä¾‹ï¼Œä»…ç”¨äºæµ‹è¯•å’Œå­¦ä¹ ç ”ç©¶ï¼Œç¦æ­¢ç”¨äºå•†ä¸šç”¨é€”æˆ–ä»»ä½•éæ³•ç”¨é€”ã€‚

> ä»»ä½•ç”¨æˆ·ç›´æ¥æˆ–é—´æ¥ä½¿ç”¨ã€ä¼ æ’­æœ¬ä»“åº“å†…å®¹æ—¶è´£ä»»è‡ªè´Ÿï¼Œæœ¬ä»“åº“çš„è´¡çŒ®è€…ä¸å¯¹è¯¥ç­‰è¡Œä¸ºäº§ç”Ÿçš„ä»»ä½•åæœè´Ÿè´£ã€‚

> å¦‚æœç›¸å…³æ–¹è®¤ä¸ºè¯¥é¡¹ç›®çš„ä»£ç å¯èƒ½æ¶‰å«Œä¾µçŠ¯å…¶æƒåˆ©ï¼Œè¯·åŠæ—¶é€šçŸ¥åˆ é™¤ç›¸å…³ä»£ç ã€‚
---

## ğŸ é¡¹ç›®åœ°å€

> [https://github.com/erma0/douyin](https://github.com/erma0/douyin)

## ğŸ¬åŠŸèƒ½

é‡‡é›†è´¦å·ä¸»é¡µä½œå“ã€å–œæ¬¢ä½œå“ã€éŸ³ä¹åŸå£°ä½œå“ã€æœç´¢ä½œå“ã€å…³æ³¨åˆ—è¡¨ã€ç²‰ä¸åˆ—è¡¨ã€åˆé›†ä½œå“ã€å•ä¸ªä½œå“

PS.

- é‡‡é›†è´¦å·ä¸»é¡µä½œå“éœ€ç™»å½•ä»»ä¸€ä¸ªè´¦å·
- é‡‡é›†è´¦å·çš„å–œæ¬¢åˆ—è¡¨éœ€è´¦å·æ‰“å¼€æƒé™æˆ–ç™»å½•æœ¬äººè´¦å·
- é‡‡é›†ä»»ä½•ç±»å‹é“¾æ¥éƒ½é»˜è®¤éœ€è¦ç™»å½•ä¸€ä¸ªè´¦å·ï¼Œå¯æ‰‹åŠ¨æŒ‡å®šä¸ç™»å½•
- æ”¯æŒè¾“å…¥æ–‡ä»¶è·¯å¾„æ‰¹é‡æ“ä½œï¼ˆåŒä¸€ç±»å‹ï¼Œä¸€è¡Œä¸€ä¸ªç›®æ ‡åœ°å€ï¼‰
- æ”¯æŒå¢é‡é‡‡é›†è´¦å·ä¸»é¡µä½œå“
- æ”¯æŒç›‘æ§ä¸»é¡µæœ€æ–°ä½œå“

## â€ğŸš©å¾…åŠ

> ğŸ’¡æ¬¢è¿PRæˆ–å»ºè®®

- [ ] API - FastAPI
- [ ] WEB UI - AMIS
- [ ] GUI - Eel

## ğŸŒ³æ–‡ä»¶ç»“æ„

```ps
douyin                           
â”œâ”€ dist                          # ç¼–è¯‘è¾“å‡ºç›®å½•
â”‚  â”œâ”€ aria2c.exe                    # aria2ä¸‹è½½å™¨
â”‚  â”œâ”€ douyin.exe                    # ä¸»ç¨‹åº
â”‚  â””â”€ monitorStray.exe              # ç›‘æ§æ–°ä½œå“
â”œâ”€ results                       # ç½‘é¡µè¿”å›æ•°æ®æ ·æ¿
â”œâ”€ browser.py                    # æµè§ˆå™¨å¯é—­
â”œâ”€ exec.py                       # å‘½ä»¤è¡Œè§£æ
â”œâ”€ ico.ico                       # å›¾æ ‡logo
â”œâ”€ login.py                      # ç™»å½•
â”œâ”€ monitor.py                    # ç›‘æ§-å‘½ä»¤è¡Œ
â”œâ”€ monitorStray.py               # ç›‘æ§-æ‰˜ç›˜å›¾æ ‡
â”œâ”€ README.md                     # é¡¹ç›®è¯´æ˜
â”œâ”€ requirements.txt              # ä¾èµ–åº“
â”œâ”€ spider.py                     # çˆ¬è™«æ ¸å¿ƒä»£ç 
â””â”€ test.py                       # éšæ‰‹æµ‹è¯•ä»£ç 
```

---

## ğŸš€ä½¿ç”¨

> ğŸ“æµ‹è¯•ç¯å¢ƒï¼š`Win10/11 x64` + `Python3.8/11`ã€‚

> ğŸ“­**åŠŸèƒ½æœªå…¨éƒ¨æµ‹è¯•ï¼Œæœ‰é—®é¢˜è¯·æäº¤issueï¼Œä¹Ÿå¯åŠ Qç¾¤`738029092`åé¦ˆ**
>
### ğŸ”ä¸»ç¨‹åº

1. Windowsåªéœ€ä¸‹è½½ [releases](https://github.com/erma0/douyin/releases) æˆ– `dist`ç›®å½•ä¸­çš„ä¸¤ä¸ªæ–‡ä»¶

    > âš ï¸ Linuxæˆ–macOSè¯·ä»[å®˜æ–¹åœ°å€ä¸‹è½½å¯¹åº”çš„Aria2](https://github.com/aria2/aria2/releases)ï¼Œç„¶åè¿è¡Œæºç æˆ–è‡ªè¡Œç¼–è¯‘

    - douyin.exe
    - aria2c.exe

2. åœ¨ç¨‹åºæ‰€åœ¨ç›®å½•æ‰“å¼€å‘½ä»¤è¡Œè¾“å…¥å‘½ä»¤ï¼Œæˆ–è€…Windowsç³»ç»Ÿå¯ä»¥ç›´æ¥åŒå‡»æ‰“å¼€douyin.exeåæ ¹æ®æç¤ºè¾“å…¥ç›®æ ‡åœ°å€

    - ğŸ”ä½¿ç”¨å¸®åŠ©

    ```ps
    PS > ./douyin --help
    Usage: douyin [OPTIONS]

      å‘½ä»¤è¡Œ

    Options:
      -u, --urls TEXT                 å¿…å¡«ã€‚è´¦å·/è¯é¢˜/éŸ³ä¹çš„URLæˆ–æ–‡ä»¶è·¯å¾„ï¼ˆæ–‡ä»¶æ ¼å¼ä¸ºä¸€è¡Œä¸€ä¸ªURLï¼‰ï¼Œæ”¯æŒå¤šæ¬¡è¾“å…¥
      -n, --num INTEGER               é€‰å¡«ã€‚æœ€å¤§é‡‡é›†æ•°é‡ï¼Œé»˜è®¤ä¸é™åˆ¶
      -g, --grab                      é€‰å¡«ã€‚åªé‡‡é›†ä¿¡æ¯ï¼Œä¸ä¸‹è½½ä½œå“
      -d, --download                  é€‰å¡«ã€‚ç›´æ¥ä¸‹è½½é‡‡é›†å®Œæˆçš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºé‡‡é›†æ—¶ä¸‹è½½å¤±è´¥åé‡è¯•
      -l, --login                     é€‰å¡«ã€‚æŒ‡å®šæ˜¯å¦éœ€è¦ç™»å½•ï¼Œé»˜è®¤è¦ç™»å½•ï¼Œç”¨äºé‡‡é›†ä¸»é¡µä½œå“ã€å…³æ³¨ç²‰ä¸åˆ—è¡¨ä»¥åŠæœ¬äººç§å¯†è´¦å·çš„ä¿¡æ¯
                                      ï¼Œä¹Ÿå¯é¿å…ä¸€äº›è«åå…¶å¦™çš„é£æ§
      -t, --type [post|like|music|search|follow|fans|collection|video]
                                      é€‰å¡«ã€‚é‡‡é›†ç±»å‹ï¼Œæ”¯æŒ[ä¸»é¡µä½œå“/å–œæ¬¢/éŸ³ä¹/æœç´¢/å…³æ³¨/ç²‰ä¸/åˆé›†/å•ä½œå“]ï¼Œé»˜è®¤é‡‡é›†p
                                      ostä¸»é¡µä½œå“ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«æœç´¢/éŸ³ä¹/åˆé›†/å•ä½œå“ã€‚é‡‡é›†è´¦å·ä¸»é¡µä½œå“æˆ–ç§å¯†è´¦å·å–œæ¬¢ä½œå“
                                      å¿…é¡»ç™»å½•ã€‚
      -b, --browser [chrome|msedge|chrome-beta|msedge-beta|msedge-dev]
                                      é€‰å¡«ã€‚æµè§ˆå™¨ç±»å‹ï¼Œé»˜è®¤ä½¿ç”¨ç¨³å®šç‰ˆEDGEï¼Œå¯é€‰[chrome/msedge]ï¼Œå¦‚éœ€ä½¿ç”¨F
                                      irefoxæˆ–WebKitè¯·è‡ªè¡Œä¿®æ”¹runå‡½æ•°ã€‚
      --help                          Show this message and exit.
    ```

    - ğŸ€ä½¿ç”¨ä¾‹å­ï¼ˆåœ¨ç¨‹åºæ‰€åœ¨ç›®å½•æ‰“å¼€å‘½ä»¤è¡Œï¼‰

    ```ps
    # é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆä¸»é¡µï¼‰çš„å…¨éƒ¨ä½œå“ï¼ˆç§å¯†è´¦å·éœ€ç™»å½•æœ¬è´¦å·ï¼‰
    ./douyin -u https://*/ 
    ./douyin -t post -u https://*/ 

    # é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆå–œæ¬¢ï¼‰çš„å…¨éƒ¨ä½œå“ï¼ˆç§å¯†è´¦å·éœ€ç™»å½•æœ¬è´¦å·ï¼‰
    ./douyin -t like -u https://*/ 

    # é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆéŸ³ä¹ï¼‰çš„å…¨éƒ¨ä½œå“
    ./douyin -u https://*/ 
    ./douyin -t music -u https://*/ 

    # é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆæœç´¢ï¼‰çš„å…¨éƒ¨ä½œå“
    ./douyin -u https://*/ 
    ./douyin -t search -u https://*/ 

    # é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆåˆé›†ï¼‰çš„å…¨éƒ¨ä½œå“
    ./douyin -u https://*/ 
    ./douyin -t collect -u https://*/ 

    # é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆå…³æ³¨ï¼‰çš„å…¨éƒ¨ä¿¡æ¯
    ./douyin -t follow -u https://*/ 

    # é‡‡é›†ç›®æ ‡åœ°å€ï¼ˆç²‰ä¸ï¼‰çš„å…¨éƒ¨ä¿¡æ¯
    ./douyin -t fans -u https://*/ 

    # åªé‡‡é›†ç›®æ ‡ä¿¡æ¯ï¼Œä¸ä¸‹è½½
    ./douyin -g -u https://*/ 

    # ç›´æ¥ä¸‹è½½é‡‡é›†è¿‡çš„ç›®æ ‡åœ°å€ï¼ˆç”¨äºé‡‡é›†æ—¶ä¸‹è½½å‡ºç°æŠ¥é”™çš„æƒ…å†µï¼‰
    ./douyin -d -u https://*/ 

    # é™åˆ¶æ•°é‡é‡‡é›†ï¼Œåªé‡‡é›†ç›®æ ‡åœ°å€çš„5æ¡ç»“æœ
    ./douyin -n 5 -u https://*/ 

    # é‡‡é›†å¤šä¸ªç›®æ ‡åœ°å€
    ./douyin -u https://*1/ -u https://*2/ 

    # é‡‡é›†æ–‡ä»¶[user.txt]ä¸­çš„å¤šä¸ªç›®æ ‡åœ°å€
    ./douyin -u ./user.txt

    # æŒ‡å®šä¸ç™»å½•é‡‡é›†ç›®æ ‡åœ°å€
    ./douyin -l -u https://*/ 

    # æŒ‡å®šä½¿ç”¨chromeé‡‡é›†
    ./douyin -b chrome -u https://*/ 

    # é‡‡é›†å•ä¸ªä½œå“
    ./douyin -u id
    ./douyin -u https://*/ 
    ```

    > ğŸ’¡æ‰‹åŠ¨ä½¿ç”¨aria2cä¸‹è½½

    ```ps
    aria2c -c --console-log-level warn -d ./ä¸‹è½½ç›®å½• -i ç”Ÿæˆçš„ä¸‹è½½é…ç½®æ–‡ä»¶.txt
    ```

### ğŸ•ç›‘æ§æ–°ä½œå“ğŸ†•

1. åªéœ€è¦ä¸‹è½½`monitorStray.exe`æ–‡ä»¶
2. åœ¨åŒç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª`url.txt`æ–‡ä»¶ï¼Œä¸€è¡Œä¸€ä¸ªä¸»é¡µé“¾æ¥
3. åŒå‡»è¿è¡Œ`monitorStray.exe`å³å¯ï¼Œæ‰˜ç›˜å›¾æ ‡å¯ä»¥æ§åˆ¶å¯åœ

> âš ï¸ Linuxæˆ–macOSè¯·ç›´æ¥è¿è¡Œ`monitor.py`æºç ï¼Œæˆ–è‡ªè¡Œç¼–è¯‘`monitorStray.py`

> âš ï¸æˆªè‡³ç›®å‰`playwright`æœ€æ–°ç‰ˆï¼ŒWindowsç¼–è¯‘æ—¶éœ€è‡ªè¡Œ[ä¿®æ”¹`playwright`æºç ](https://github.com/microsoft/playwright-python/issues/1778#issuecomment-1565339726)æ‰èƒ½éšè—å‘½ä»¤è¡Œé»‘çª—å£ï¼Œæˆ–è€…ä½¿ç”¨`1.29.0`ç‰ˆæœ¬çš„`playwright`

## ğŸ”¨ç¼–è¯‘

> â—**ä¸èƒ½upxå‹ç¼©ï¼Œå¦åˆ™playwrightæ— æ³•å¯åŠ¨**

1. å®‰è£…ä¾èµ–

    ```ps
    pip install -U -r ./requirements.txt
    ```

2. å®‰è£…pyinstaller

    ```ps
    pip install pyinstaller
    ```

3. è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆpowershellï¼‰

    ```ps
    $env:PLAYWRIGHT_BROWSERS_PATH="0"
    ```

4. å®‰è£…Edgeæˆ–è€…Chrome

    ```ps
    playwright install msedge
    playwright install chromium
    ```

5. æ‰“åŒ…EXEï¼Œå›¾æ ‡å¯è‡ªè¡Œæ›´æ¢

    - ç¼–è¯‘ä¸»ç¨‹åº

    ```ps
    pyinstaller -F ./exec.py -i ./ico.ico -n douyin
    ```

    - ç¼–è¯‘ç›‘æ§ç¨‹åº

    ```ps
    # å‘½ä»¤è¡Œç¨‹åº
    pyinstaller -F ./monitor.py -i ./ico.ico 
    # æ‰˜ç›˜ç¨‹åº
    pyinstaller -w -F ./monitorStray.py -i ./ico.ico --add-data "ico.ico;."
    ```

## â˜•è¯·ä½œè€…å–æ¯å’–å•¡

---

![æ”¯ä»˜å®å¾®ä¿¡æ”¶æ¬¾][1]

  [1]: https://erma0.cn/images/qrcode/shouqianma.png
