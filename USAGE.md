# ä½¿ç”¨æŒ‡å—

**[English](./USAGE_EN.md) | [Tiáº¿ng Viá»‡t](./USAGE_VI.md) | ç®€ä½“ä¸­æ–‡**

## ğŸ“‹ ç›®å½•

- [cookie è·å–](#cookieè·å–)
- [åŠŸèƒ½è¯´æ˜](#åŠŸèƒ½è¯´æ˜)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [é«˜çº§ç”¨æ³•](#é«˜çº§ç”¨æ³•)

---

## ğŸª cookie è·å–

Cookie æ˜¯è·å–æ•°æ®çš„å¿…è¦å‡­è¯ã€‚

### æ–¹å¼ä¸€ï¼šç™»å½•è·å–ï¼ˆæ¨èï¼‰

> ğŸ’¡ ä»… GUI æ¨¡å¼æ”¯æŒ

1. æ‰“å¼€åº”ç”¨è®¾ç½®
2. ç‚¹å‡»ã€Œç™»å½•è·å–ã€æŒ‰é’®
3. åœ¨å¼¹å‡ºçš„çª—å£ä¸­å®ŒæˆæŠ–éŸ³ç™»å½•ï¼ˆæ”¯æŒæ‰«ç /æ‰‹æœºå·ï¼‰
4. ç™»å½•æˆåŠŸå Cookie ä¼šè‡ªåŠ¨å¡«å…¥
5. ç‚¹å‡»ã€Œä¿å­˜é…ç½®ã€

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨è·å–

1. è®¿é—® https://www.douyin.com å¹¶ç™»å½•
2. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åˆ‡æ¢åˆ° `Network` æ ‡ç­¾ï¼Œåˆ·æ–°é¡µé¢
4. è¿‡æ»¤å™¨è¾“å…¥ `aweme`ï¼Œç‚¹å‡»ä»»æ„è¯·æ±‚
5. åœ¨ `Request Headers` ä¸­æ‰¾åˆ° `Cookie:` å­—æ®µï¼Œå¤åˆ¶å®Œæ•´å†…å®¹
6. åœ¨åº”ç”¨è®¾ç½®ä¸­ç²˜è´´å¹¶ä¿å­˜

> ğŸ’¡ æç¤ºï¼šå»ºè®®å‚ç…§ä¸‹å›¾è·å– Cookieï¼Œç­›é€‰ post è¯·æ±‚ï¼Œå¤åˆ¶`Cookie:`å­—æ®µå†…å®¹ã€‚

![ç¤ºæ„å›¾](./docs/images/image.png)

æœ‰æ•ˆ Cookie åº”åŒ…å«ï¼š`sessionid`ã€`ttwid`ã€`__ac_nonce`

---

## ğŸ¯ åŠŸèƒ½è¯´æ˜

### é‡‡é›†ç±»å‹

| ç±»å‹           | è¯´æ˜                 | è¾“å…¥ç¤ºä¾‹                                  | çŠ¶æ€    |
| -------------- | -------------------- | ----------------------------------------- | ------- |
| **å•ä¸ªä½œå“**   | è·å–å•ä¸ªä½œå“ä¿¡æ¯     | `https://www.douyin.com/video/7xxx`       | âœ… æ­£å¸¸ |
| **ç”¨æˆ·ä¸»é¡µ**   | è·å–ç”¨æˆ·å‘å¸ƒçš„ä½œå“   | `https://www.douyin.com/user/MS4wLjABxxx` | âœ… æ­£å¸¸ |
| **ç”¨æˆ·å–œæ¬¢**   | è·å–ç”¨æˆ·ç‚¹èµçš„ä½œå“   | `https://www.douyin.com/user/MS4wLjABxxx` | âœ… æ­£å¸¸ |
| **ç”¨æˆ·æ”¶è—**   | è·å–ç”¨æˆ·æ”¶è—çš„ä½œå“   | `https://www.douyin.com/user/MS4wLjABxxx` | âœ… æ­£å¸¸ |
| **è¯é¢˜æŒ‘æˆ˜**   | è·å–è¯é¢˜ä¸‹çš„ä½œå“     | `https://www.douyin.com/hashtag/xxx`      | âœ… æ­£å¸¸ |
| **åˆé›†**       | è·å–åˆé›†ä¸­çš„ä½œå“     | `https://www.douyin.com/mix/xxx`          | âœ… æ­£å¸¸ |
| **éŸ³ä¹åŸå£°**   | è·å–ä½¿ç”¨è¯¥éŸ³ä¹çš„ä½œå“ | `https://www.douyin.com/music/7xxx`       | âœ… æ­£å¸¸ |
| **å…³é”®è¯æœç´¢** | æœç´¢ç›¸å…³ä½œå“         | `é£æ™¯`                                    | âœ… æ­£å¸¸ |
| **å…³æ³¨ç”¨æˆ·**   | è·å–å…³æ³¨çš„ç”¨æˆ·       | `https://www.douyin.com/user/MS4wLjABxxx` | âœ… æ­£å¸¸ |
| **ç²‰ä¸ç”¨æˆ·**   | è·å–ç²‰ä¸çš„ç”¨æˆ·       | `https://www.douyin.com/user/MS4wLjABxxx` | âœ… æ­£å¸¸ |

### æ‰¹é‡ä¸‹è½½

éœ€è¦ Aria2 æ”¯æŒï¼š

```powershell
# å®‰è£… Aria2
.\scripts\setup\aria2.ps1
```

ç‚¹å‡»"ä¸€é”®ä¸‹è½½å…¨éƒ¨"ï¼Œè‡ªåŠ¨é€šè¿‡ Aria2 ä¸‹è½½é‡‡é›†ç»“æœã€‚

> ğŸ’¡ æç¤ºï¼šcli æ¨¡å¼ä¸‹ï¼Œé»˜è®¤å¼€å¯ä¸‹è½½åŠŸèƒ½ï¼Œå¯é€šè¿‡`--no-download`å‚æ•°ç¦ç”¨ä¸‹è½½ã€‚

### è®¾ç½®é€‰é¡¹

| é€‰é¡¹         | é»˜è®¤å€¼       |
| ------------ | ------------ |
| ä¸‹è½½è·¯å¾„     | `./download` |
| æœ€å¤§é‡è¯•æ¬¡æ•° | 3            |
| æœ€å¤§å¹¶å‘æ•°   | 5            |
| Aria2 ç«¯å£   | 6800         |

---

## â“ å¸¸è§é—®é¢˜

### Cookie æ— æ•ˆæˆ–å·²è¿‡æœŸ

é‡æ–°è·å– Cookieï¼Œç¡®ä¿åŒ…å« `sessionid` ç­‰å¿…è¦å­—æ®µã€‚

> ğŸ’¡ æç¤ºï¼šå»ºè®®å‚ç…§ [cookie è·å–](#cookieè·å–) çš„ç¤ºæ„å›¾æ“ä½œã€‚

### é‡‡é›†ç»“æœä¸ºç©º

1. æ£€æŸ¥é“¾æ¥æ ¼å¼æ˜¯å¦æ­£ç¡®
2. æ›´æ–° Cookie
3. éœ€ç›®æ ‡ç”¨æˆ·å¼€æ”¾æƒé™

### ä¸‹è½½å¤±è´¥

1. ç¡®è®¤ Aria2 å·²å®‰è£…ï¼š`aria2c --version`
2. æ£€æŸ¥ä¸‹è½½è·¯å¾„/ç£ç›˜ç©ºé—´
3. å°è¯•å‡å°‘å¹¶å‘æ•°
4. éƒ¨åˆ†ä»»åŠ¡ä¸‹è½½å¤±è´¥åŸå› ä¸æ˜ï¼Œå¯å¤šæ¬¡é‡è¯•

### åº”ç”¨å¯åŠ¨å¤±è´¥

1. ç¡®è®¤å‰ç«¯å·²æ„å»º
2. ç¡®è®¤å·²å®‰è£…ä¾èµ–
3. ç¡®è®¤æœªè¢«é˜²ç«å¢™æˆ–å®‰å…¨è½¯ä»¶æ‹¦æˆª
4. ç¡®è®¤å·²å®‰è£… webview2ï¼ˆwindows gui ç”¨æˆ·ï¼‰

### è”ç³»æ”¯æŒ

æäº¤ [Issue](https://github.com/erma0/douyin/issues) æ—¶è¯·åŒ…å«ï¼šç›®æ ‡é“¾æ¥ã€é”™è¯¯ä¿¡æ¯ã€ç³»ç»Ÿç‰ˆæœ¬

---

## ğŸ“ é«˜çº§ç”¨æ³•

### æœåŠ¡å™¨æ¨¡å¼

```bash
python -m backend.server              # é»˜è®¤ 8000 ç«¯å£
python -m backend.server --port 9000  # æŒ‡å®šç«¯å£
python -m backend.server --dev        # å¼€å‘æ¨¡å¼
```

ç¯å¢ƒå˜é‡ï¼š`DOUYIN_HOST`ã€`DOUYIN_PORT`ã€`DOUYIN_DEV`ã€`DOUYIN_LOG_LEVEL`

### HTTP API

```bash
# å¯åŠ¨é‡‡é›†ä»»åŠ¡
curl -X POST http://localhost:8000/api/task/start \
  -H "Content-Type: application/json" \
  -d '{"type": "favorite", "target": "https://www.douyin.com/user/MS4wLjABxxx", "limit": 20}'

# è·å–ç»“æœ
curl http://localhost:8000/api/task/results/task_xxx
```

ä¸»è¦ç«¯ç‚¹ï¼š

- `POST /api/task/start` - å¯åŠ¨ä»»åŠ¡
- `GET /api/task/status` - ä»»åŠ¡çŠ¶æ€
- `GET /api/task/results/{task_id}` - é‡‡é›†ç»“æœ
- `GET /api/settings` - è·å–è®¾ç½®
- `POST /api/settings` - ä¿å­˜è®¾ç½®
- `GET /api/events` - SSE äº‹ä»¶æµ

### å‘½ä»¤è¡Œæ¨¡å¼

```bash
# åŸºç¡€ç”¨æ³•
python -m backend.cli -u https://www.douyin.com/user/xxx -l 20

# æŒ‡å®šç±»å‹
python -m backend.cli -u é“¾æ¥ -t favorite  # post/favorite/collection/hashtag/music/mix/aweme/search/follower/following

# æœç´¢ç­›é€‰
python -m backend.cli -u "ç¾é£Ÿ" -t search --sort-type 2 --publish-time 7

# æ‰¹é‡é‡‡é›†ï¼ˆurls.txt æ¯è¡Œä¸€ä¸ªé“¾æ¥ï¼‰
python -m backend.cli -u urls.txt -l 50

# ä»…é‡‡é›†ä¸ä¸‹è½½
python -m backend.cli -u é“¾æ¥ --no-download
```

ç­›é€‰å‚æ•°ï¼š

- `--sort-type`: 0=ç»¼åˆï¼Œ1=æœ€å¤šç‚¹èµï¼Œ2=æœ€æ–°
- `--publish-time`: 0=ä¸é™ï¼Œ1=ä¸€å¤©å†…ï¼Œ7=ä¸€å‘¨å†…ï¼Œ180=åŠå¹´å†…
- `--filter-duration`: 0-1=1 åˆ†é’Ÿä»¥ä¸‹ï¼Œ1-5=1-5 åˆ†é’Ÿï¼Œ5-10000=5 åˆ†é’Ÿä»¥ä¸Š

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰
